FROM golang:1.24.0-alpine3.21 AS builder
WORKDIR /app
COPY . .
RUN go build -o main main.go

# Run stage
FROM alpine:3.21
WORKDIR /app
COPY --from=builder /app/main .
COPY app.env .

EXPOSE 8080
CMD ["/app/main"]

#–≠—Ç–æ—Ç `Dockerfile` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —ç—Ç–∞–ø–æ–≤: —Å–±–æ—Ä–∫–∏ (`builder`) –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`Run stage`).  
#
#### **–†–∞–∑–±–æ—Ä –ø–æ —Å—Ç—Ä–æ–∫–∞–º:**  
#
##### **1. –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏ (Builder Stage)**
#```dockerfile
#FROM golang:1.24.0-alpine3.21 AS builder
#```
#- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Go `1.24.0` –Ω–∞ –æ—Å–Ω–æ–≤–µ `alpine3.21` (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π Linux).  
#- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `builder`.  
#
#```dockerfile
#WORKDIR /app
#```
#- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/app` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.  
#
#```dockerfile
#COPY . .
#```
#- –ö–æ–ø–∏—Ä—É–µ—Ç –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`.`) –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`/app`).  
#
#```dockerfile
#RUN go build -o main main.go
#```
#- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç `main.go`, —Å–æ–∑–¥–∞–≤–∞—è –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª `main` –≤ `/app`.  
#
##### **2. –≠—Ç–∞–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Run Stage)**
#```dockerfile
#FROM alpine:3.21
#```
#- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π `Alpine Linux 3.21` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.  
#
#```dockerfile
#WORKDIR /app
#```
#- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/app`.  
#
#```dockerfile
#COPY --from=builder /app/main .
#```
#- –ö–æ–ø–∏—Ä—É–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ `main` –∏–∑ `builder` –≤ —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.  
#
#```dockerfile
#EXPOSE 8080
#```
#- –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É `8080` (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç).  
#
#```dockerfile
#CMD ["/app/main"]
#```
#- –ó–∞–ø—É—Å–∫–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª `main`, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç.  
#
#### **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç `Dockerfile`?**
#1. **–°–æ–±–∏—Ä–∞–µ—Ç** Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (`builder`).
#2. **–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–æ–ª—å–∫–æ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`Alpine Linux`).
#3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, —Ç–∞–∫ –∫–∞–∫ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–∑–µ –Ω–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ Go.
#4. **–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**, —Å–ª—É—à–∞—é—â–µ–µ –ø–æ—Ä—Ç `8080`.  
#
#–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Multi-Stage Build** –∏ –ø–æ–º–æ–≥–∞–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞. üöÄ